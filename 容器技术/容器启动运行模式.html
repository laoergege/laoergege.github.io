<!DOCTYPE html>
<html lang="zh-CN" data-theme="cupcake">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.46">
    <link rel="manifest" href="/site.webmanifest.json"><link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"><title>å®¹å™¨å¯åŠ¨è¿è¡Œæ¨¡å¼ä»¥åŠé™„åŠ åˆ†ç¦»åŸç† | </title><meta name="description" content="åœ¨å‘ç°å¾ˆå¤šæ•™ç¨‹æ–‡æ¡£é‡Œè¿›è¡Œå®¹å™¨äº¤äº’æ—¶éƒ½æ˜¯ç›´æ¥ä½¿ç”¨ `-it` å‚æ•°ä¸ºä¾‹å­ï¼Œå¹¶æ²¡æœ‰æ›´å¤šè§£é‡Šè¯´æ˜ `-i`ã€`-t` çš„å«ä¹‰åŠåŒºåˆ«ï¼Œç¬”è€…å¸¦ç€ç–‘æƒ‘è¯•å›¾å»ç†è§£è¯´æ˜å…¶ä¸­åŸç†ï¼Œæœ¬æ–‡ä¸­å¦‚æœ‰é”™è¯¯éº»çƒ¦æŒ‡å‡º ğŸ˜€ã€‚">
    <link rel="preload" href="/assets/js/runtime~app.7d4bd660.js" as="script"><link rel="preload" href="/assets/css/styles.1c65b737.css" as="style"><link rel="preload" href="/assets/js/5838.13a569e5.js" as="script"><link rel="preload" href="/assets/js/app.7e792774.js" as="script"><link rel="prefetch" href="/assets/js/v-03fc2322.47d94022.js"><link rel="prefetch" href="/assets/js/v-ba2c1988.3632b5e0.js"><link rel="prefetch" href="/assets/js/v-fd8e5af2.a9cafb88.js"><link rel="prefetch" href="/assets/js/v-5a071f34.190f1fdc.js"><link rel="prefetch" href="/assets/js/v-317472f1.a3c9dba2.js"><link rel="prefetch" href="/assets/js/v-560b844b.09f8a065.js"><link rel="prefetch" href="/assets/js/v-85bc3e4c.27575d9e.js"><link rel="prefetch" href="/assets/js/v-4835f72d.209f9a9b.js"><link rel="prefetch" href="/assets/js/v-6f2abf9c.c6a52b82.js"><link rel="prefetch" href="/assets/js/v-32c68258.46247de2.js"><link rel="prefetch" href="/assets/js/v-04983e79.ae40370a.js"><link rel="prefetch" href="/assets/js/v-7269d92e.00653b56.js"><link rel="prefetch" href="/assets/js/v-54e51afe.e3f20358.js"><link rel="prefetch" href="/assets/js/v-5fbdabee.afcc17b5.js"><link rel="prefetch" href="/assets/js/v-928f5a14.0a4a3dc4.js"><link rel="prefetch" href="/assets/js/v-88c7f226.529f6212.js"><link rel="prefetch" href="/assets/js/v-5e99732b.68dd2407.js"><link rel="prefetch" href="/assets/js/v-2fc78b4d.97b37f50.js"><link rel="prefetch" href="/assets/js/v-d99bba28.2cf82742.js"><link rel="prefetch" href="/assets/js/v-bee2f4a8.f072eb83.js"><link rel="prefetch" href="/assets/js/v-57ad8616.44af159f.js"><link rel="prefetch" href="/assets/js/v-f701b528.aa7f8f17.js"><link rel="prefetch" href="/assets/js/v-093d016d.bc725dd1.js"><link rel="prefetch" href="/assets/js/v-06ed95cc.0db5595a.js"><link rel="prefetch" href="/assets/js/v-01b20944.db789013.js"><link rel="prefetch" href="/assets/js/v-137d7552.50039c10.js"><link rel="prefetch" href="/assets/css/5045.styles.72ac531f.css"><link rel="prefetch" href="/assets/js/v-631fc68a.80740d81.js"><link rel="prefetch" href="/assets/js/v-8b5f7690.191ba9a3.js"><link rel="prefetch" href="/assets/js/v-530f22f6.f8e361fa.js"><link rel="prefetch" href="/assets/js/v-be2646cc.549f65bf.js"><link rel="prefetch" href="/assets/js/v-75e44f07.2f8601c3.js"><link rel="prefetch" href="/assets/js/v-c2504efe.28c55f92.js"><link rel="prefetch" href="/assets/js/v-5bc51cd9.b23c2caa.js"><link rel="prefetch" href="/assets/js/5956.f176ea33.js"><link rel="prefetch" href="/assets/js/v-6dc8e518.a8181c32.js"><link rel="prefetch" href="/assets/js/v-568d3b89.483d19f1.js"><link rel="prefetch" href="/assets/js/v-743faa02.3247db36.js"><link rel="prefetch" href="/assets/js/v-d52c6cc0.34d4b256.js"><link rel="prefetch" href="/assets/js/v-78263bfa.b7cb21e4.js"><link rel="prefetch" href="/assets/js/v-199de1f8.16ad6f91.js"><link rel="prefetch" href="/assets/js/v-30078430.3079f1d2.js"><link rel="prefetch" href="/assets/js/v-240dbb06.02e786fb.js"><link rel="prefetch" href="/assets/js/v-7a102f72.94a1b7e7.js"><link rel="prefetch" href="/assets/js/v-1402111c.9dc8cc11.js"><link rel="prefetch" href="/assets/js/v-f2bbc8da.fc4d9aa5.js"><link rel="prefetch" href="/assets/js/v-b0176dc2.b994ff0c.js"><link rel="prefetch" href="/assets/js/4644.1787b6ff.js"><link rel="prefetch" href="/assets/js/v-a5da5a08.cc633de8.js"><link rel="prefetch" href="/assets/js/v-acadbc84.800a32fa.js"><link rel="prefetch" href="/assets/js/v-a270a8ca.ea9c331c.js"><link rel="prefetch" href="/assets/js/v-a9440b46.63ee3544.js"><link rel="prefetch" href="/assets/js/6929.46233b49.js"><link rel="prefetch" href="/assets/js/9840.789f773b.js"><link rel="prefetch" href="/assets/js/v-9f06f78c.ff18832e.js"><link rel="prefetch" href="/assets/js/9870.c84a31ac.js"><link rel="prefetch" href="/assets/js/v-8daa1a0e.8245b191.js"><link rel="prefetch" href="/sw.js"><link rel="prefetch" href="/assets/css/3859.styles.7057c730.css">
    <link rel="stylesheet" href="/assets/css/styles.1c65b737.css">
</head>

<body>
    <div id="app"><!--[--><!--[--><div class="navbar sticky top-0 z-10"><a href="/" class=""><label class="btn btn-circle avatar"><div class="rounded-full ring ring-white shadow-2xl no-zoom"><img src="/avatar.webp"></div></label></a></div><div class="min-h-screen flex justify-center flex-col items-center"><article class="article w-full sm:w-3/4 lg:w-2/3 p-4" data-theme="cupcake"><div class="sm:max-w-full pb-12 prose sm:prose-sm md:prose-lg dark:prose-invert"><h1 id="å®¹å™¨å¯åŠ¨è¿è¡Œæ¨¡å¼ä»¥åŠé™„åŠ åˆ†ç¦»åŸç†" tabindex="-1"><a class="header-anchor" href="#å®¹å™¨å¯åŠ¨è¿è¡Œæ¨¡å¼ä»¥åŠé™„åŠ åˆ†ç¦»åŸç†" aria-hidden="true">#</a> å®¹å™¨å¯åŠ¨è¿è¡Œæ¨¡å¼ä»¥åŠé™„åŠ åˆ†ç¦»åŸç†</h1><p>åœ¨å‘ç°å¾ˆå¤šæ•™ç¨‹æ–‡æ¡£é‡Œè¿›è¡Œå®¹å™¨äº¤äº’æ—¶éƒ½æ˜¯ç›´æ¥ä½¿ç”¨ <code>-it</code> å‚æ•°ä¸ºä¾‹å­ï¼Œå¹¶æ²¡æœ‰æ›´å¤šè§£é‡Šè¯´æ˜ <code>-i</code>ã€<code>-t</code> çš„å«ä¹‰åŠåŒºåˆ«ï¼Œç¬”è€…å¸¦ç€ç–‘æƒ‘è¯•å›¾å»ç†è§£è¯´æ˜å…¶ä¸­åŸç†ï¼Œæœ¬æ–‡ä¸­å¦‚æœ‰é”™è¯¯éº»çƒ¦æŒ‡å‡º ğŸ˜€ã€‚</p><blockquote><p>ä»¥ä¸‹ä¾‹å­ä¸­ä½¿ç”¨ podman å·¥å…·ï¼Œä¸ docker å®¢æˆ·ç«¯æ“ä½œç›¸åŒã€‚</p></blockquote><h2 id="å®¹å™¨å¯åŠ¨æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#å®¹å™¨å¯åŠ¨æ¨¡å¼" aria-hidden="true">#</a> å®¹å™¨å¯åŠ¨æ¨¡å¼</h2><p>åœ¨åˆ¶ä½œé•œåƒæ—¶ï¼ŒDockerfile å¿…é¡»è‡³å°‘æŒ‡å®š CMD æˆ– ENTRYPOINT å…¶ä¸­çš„ä¸€ä¸ªæ¥å¯åŠ¨é»˜è®¤ç¨‹åºï¼Œé€šå¸¸æˆ‘ä»¬ä¼šæœ‰ä»¥ä¸‹ä¸‰ç§ç¨‹åºè¿è¡Œæ¨¡å‹ï¼š</p><ul><li>é»˜è®¤æ¨¡å¼ï¼šç›´æ¥è¿è¡Œä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºï¼Œæ‰§è¡Œå®Œè¾“å‡ºç»“æœå³ç»“æŸ</li><li>äº¤äº’æ¨¡å¼ï¼šå‰å°å¯åŠ¨ä¸€ä¸ªå¯æŒç»­äº¤äº’è¿è¡Œçš„ç¨‹åº</li><li>åˆ†ç¦»æ¨¡å¼ï¼šå¯åŠ¨ä¸€ä¸ªåå°æŒç»­è¿è¡Œçš„ç¨‹åº</li></ul><h2 id="é»˜è®¤æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#é»˜è®¤æ¨¡å¼" aria-hidden="true">#</a> é»˜è®¤æ¨¡å¼</h2><div class="language-bash ext-sh"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">$ podman run --rm ubuntu </span><span style="color:#0550AE;">pwd</span></span>
<span class="line"><span style="color:#24292F;">/</span></span>
<span class="line"></span></code></pre></div><p>æ‰§è¡Œå®Œ pwd å‘½ä»¤åå®¹å™¨å°±ç»“æŸé€€å‡ºï¼Œç„¶ååœ¨ <code>--rm</code> æ•ˆæœä¸‹è‡ªåŠ¨åˆ é™¤å®¹å™¨ï¼š</p><div class="language-bash ext-sh"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">$ podman ps -a              </span></span>
<span class="line"><span style="color:#24292F;">CONTAINER ID  IMAGE       COMMAND     CREATED     STATUS      PORTS       NAMES</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><h2 id="åˆ†ç¦»æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#åˆ†ç¦»æ¨¡å¼" aria-hidden="true">#</a> åˆ†ç¦»æ¨¡å¼</h2><div class="language-bash ext-sh"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">[core@localhost </span><span style="color:#CF222E;">~</span><span style="color:#24292F;">]$ podman run --rm -d nginx</span></span>
<span class="line"><span style="color:#24292F;">...</span></span>
<span class="line"></span></code></pre></div><p>åœ¨è¿›ç¨‹å®Œæˆä¹‹å‰æˆ‘ä»¬ä¸èƒ½è¿”å›åˆ°æˆ‘ä»¬çš„ shell æç¤ºç¬¦ã€‚ä¸Šé¢çš„å‘½ä»¤å°†æ ‡å‡†è¾“å‡º ( stdout ) å’Œæ ‡å‡†é”™è¯¯ ( stderr ) æµä¸æˆ‘ä»¬çš„ç»ˆç«¯é“¾æ¥ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç»ˆç«¯ä¸­çœ‹åˆ°å®¹å™¨çš„æ§åˆ¶å°è¾“å‡ºã€‚</p><p>åˆ†ç¦»æ¨¡å¼æŠŠå®¹å™¨ä½œä¸ºå®ˆæŠ¤è¿›ç¨‹ï¼Œå¹¶ä¸ä¼šè¯çš„æ§åˆ¶ç»ˆç«¯åˆ†ç¦»ã€‚æˆ‘ä»¬ä½¿ç”¨ <code>-d|--detach</code> é€‰é¡¹ä»¥åˆ†ç¦»æ¨¡å¼è¿è¡Œå®¹å™¨ï¼š</p><div class="language-bash ext-sh"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">[core@localhost </span><span style="color:#CF222E;">~</span><span style="color:#24292F;">]$ podman run --rm -d nginx</span></span>
<span class="line"><span style="color:#24292F;">43765140fad728f0241c75f4f5be5b924b7a5cbee632af15ac045157bd6502a1</span></span>
<span class="line"></span></code></pre></div><h2 id="äº¤äº’æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#äº¤äº’æ¨¡å¼" aria-hidden="true">#</a> äº¤äº’æ¨¡å¼</h2><p><code>-a|--attach</code>ï¼šå³å°†ç»ˆç«¯é™„åŠ åˆ°å®¹å™¨çš„æ ‡å‡†æµï¼ˆSTDIN, STDOUTå’ŒSTDERRï¼‰ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥é€šè¿‡ç»ˆç«¯è¾“å…¥è¾“å‡ºä¸è¿›ç¨‹äº¤äº’ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®š <code>-a</code> é€‰é¡¹ï¼Œé»˜è®¤ä¼š attach stdout å’Œ stderrã€‚ä¸Šé¢çš„å‘½ä»¤æ•ˆæœç›¸å½“äºä¸‹é¢ï¼š</p><div class="language-bash ext-sh"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">$ podman run --rm -a stdout -a stderr ubuntu </span><span style="color:#0550AE;">pwd</span></span>
<span class="line"><span style="color:#24292F;">/</span></span>
<span class="line"></span></code></pre></div><p>ä½†æ˜¯å½“æˆ‘ä»¬æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¼€å¯ä¸ bash äº¤äº’ï¼Œå´å‘ç°å®¹å™¨ç»™åœæ­¢äº†ã€‚</p><blockquote><p>ubunut é•œåƒé»˜è®¤å¯åŠ¨ç¨‹åº Bash</p></blockquote><div class="language-bash ext-sh"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">$ podman run --rm -a stdin -a stdout ubuntu</span></span>
<span class="line"></span></code></pre></div><p>å°½ç®¡æˆ‘ä»¬ attach å®¹å™¨çš„ stdinï¼Œ<strong>ä½†å®¹å™¨çš„è¾“å…¥æµå®é™…ä¸Šæ˜¯å…³é—­çš„</strong>ï¼š</p><p>å…ˆé€šè¿‡ sleep å¯åŠ¨é˜»å¡ç¨‹åºï¼Œ</p><div class="language-bash ext-sh"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">$ podman run --rm -a stdin -a stdout ubuntu sleep 30000</span></span>
<span class="line"></span></code></pre></div><p>å†é€šè¿‡å¦ä¸€ä¸ªç»ˆç«¯æŸ¥çœ‹è¯¦æƒ…ï¼š</p><div class="language-bash ext-sh"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">[core@localhost </span><span style="color:#CF222E;">~</span><span style="color:#24292F;">]$ lsns</span></span>
<span class="line"><span style="color:#24292F;">        NS TYPE   NPROCS   PID USER COMMAND</span></span>
<span class="line"><span style="color:#24292F;">4026531834 </span><span style="color:#CF222E;">time</span><span style="color:#24292F;">       13  1460 core /usr/lib/systemd/systemd --user</span></span>
<span class="line"><span style="color:#24292F;">4026531835 cgroup     12  1460 core /usr/lib/systemd/systemd --user</span></span>
<span class="line"><span style="color:#24292F;">4026531836 pid       129  1460 core /usr/lib/systemd/systemd --user</span></span>
<span class="line"><span style="color:#24292F;">4026531837 user        7  1460 core /usr/lib/systemd/systemd --user</span></span>
<span class="line"><span style="color:#24292F;">4026531838 uts        12  1460 core /usr/lib/systemd/systemd --user</span></span>
<span class="line"><span style="color:#24292F;">4026531839 ipc        12  1460 core /usr/lib/systemd/systemd --user</span></span>
<span class="line"><span style="color:#24292F;">4026531840 net        12  1460 core /usr/lib/systemd/systemd --user</span></span>
<span class="line"><span style="color:#24292F;">4026531841 mnt         7  1460 core /usr/lib/systemd/systemd --user</span></span>
<span class="line"><span style="color:#24292F;">4026532285 user      123  1649 core catatonit -P</span></span>
<span class="line"><span style="color:#24292F;">4026532351 mnt         4  1649 core catatonit -P</span></span>
<span class="line"><span style="color:#24292F;">4026532422 net         1 25717 core sleep 30000</span></span>
<span class="line"><span style="color:#24292F;">4026532545 mnt         1 25717 core sleep 30000</span></span>
<span class="line"><span style="color:#24292F;">4026532546 mnt         1 25679 core /usr/bin/slirp4netns --disable-host-loopback --mtu=65520 --enable-sandbox --enable-seccomp --enable-ipv6 -c -r 3 --netns-t</span></span>
<span class="line"><span style="color:#24292F;">4026532550 uts         1 25717 core sleep 30000</span></span>
<span class="line"><span style="color:#24292F;">4026532551 ipc         1 25717 core sleep 30000</span></span>
<span class="line"><span style="color:#24292F;">4026532552 pid         1 25717 core sleep 30000</span></span>
<span class="line"><span style="color:#24292F;">4026532553 cgroup      1 25717 core sleep 30000</span></span>
<span class="line"></span></code></pre></div><p>è¿›ç¨‹ 25717 å³æˆ‘ä»¬åˆšåˆšå¯åŠ¨çš„å®¹å™¨ã€‚</p><div class="language-bash ext-sh"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">[core@localhost </span><span style="color:#CF222E;">~</span><span style="color:#24292F;">]$ lsof -p 25717</span></span>
<span class="line"><span style="color:#24292F;">COMMAND   PID USER   FD   TYPE DEVICE SIZE/OFF      NODE NAME</span></span>
<span class="line"><span style="color:#24292F;">sleep   25717 core  cwd    DIR   0,49       28  41943573 /</span></span>
<span class="line"><span style="color:#24292F;">sleep   25717 core  rtd    DIR   0,49       28  41943573 /</span></span>
<span class="line"><span style="color:#24292F;">sleep   25717 core  txt    REG   0,49    35000 134218012 /bin/sleep</span></span>
<span class="line"><span style="color:#24292F;">sleep   25717 core  mem    REG  252,4          134218012 /bin/sleep (path dev=0,46, inode=2885535)</span></span>
<span class="line"><span style="color:#24292F;">sleep   25717 core  mem    REG  252,4          202375315 /lib/x86_64-linux-gnu/libc-2.27.so (stat: No such file or directory)</span></span>
<span class="line"><span style="color:#24292F;">sleep   25717 core  mem    REG  252,4          202375297 /lib/x86_64-linux-gnu/ld-2.27.so (stat: No such file or directory)</span></span>
<span class="line"><span style="color:#24292F;">sleep   25717 core    0u   CHR    1,3      0t0         4 /dev/null</span></span>
<span class="line"><span style="color:#24292F;">sleep   25717 core    1w  FIFO   0,13      0t0   2328957 pipe</span></span>
<span class="line"><span style="color:#24292F;">sleep   25717 core    2w  FIFO   0,13      0t0   2328958 pipe</span></span>
<span class="line"></span></code></pre></div><p>å…¶ä¸­ <code>sleep 25717 core 0u CHR 1,3 0t0 4 /dev/null</code> çš„ <code>0u</code> å³æ˜¯å®¹å™¨çš„è¾“å…¥æµï¼Œå‘ç°æ˜¯å­—ç¬¦è®¾å¤‡ <code>/dev/null</code>ã€‚</p><blockquote><p>Linux ä¸­çš„ <code>/dev/null</code> æ˜¯ä¸€ä¸ªç©ºè®¾å¤‡æ–‡ä»¶ã€‚è¿™å°†ä¸¢å¼ƒä»»ä½•å†™å…¥å®ƒçš„å†…å®¹ï¼Œå¹¶åœ¨è¯»å–æ—¶è¿”å› EOFã€‚</p></blockquote><h3 id="interactive-é€‰é¡¹" tabindex="-1"><a class="header-anchor" href="#interactive-é€‰é¡¹" aria-hidden="true">#</a> interactive é€‰é¡¹</h3><p><code>-i|--interactive</code>ï¼šè®©å®¹å™¨çš„æ ‡å‡†è¾“å…¥ä¿æŒæ‰“å¼€çŠ¶æ€ï¼Œå³ä½¿å®¹å™¨çš„æ ‡å‡†è¾“å…¥ï¼Œè¾“å‡ºå’Œé”™è¯¯æµæ²¡æœ‰è¢«é™„åŠ ã€‚</p><p>é™„å¸¦ <code>-i</code> æ—¶ <code>-a stdin</code> ç›¸å½“é»˜è®¤å¸¦ä¸Šã€‚é‡å¤ä¸Šé¢å®éªŒæ“ä½œï¼š</p><div class="language-bash ext-sh"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">[core@localhost </span><span style="color:#CF222E;">~</span><span style="color:#24292F;">]$ podman run --rm -i ubuntus</span></span>
<span class="line"></span></code></pre></div><div class="language-bash ext-sh"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">[core@localhost </span><span style="color:#CF222E;">~</span><span style="color:#24292F;">]$ lsns</span></span>
<span class="line"><span style="color:#24292F;">        NS TYPE   NPROCS   PID USER COMMAND</span></span>
<span class="line"><span style="color:#24292F;">4026531834 </span><span style="color:#CF222E;">time</span><span style="color:#24292F;">       13  1460 core /usr/lib/systemd/systemd --user</span></span>
<span class="line"><span style="color:#24292F;">4026531835 cgroup     12  1460 core /usr/lib/systemd/systemd --user</span></span>
<span class="line"><span style="color:#24292F;">4026531836 pid       129  1460 core /usr/lib/systemd/systemd --user</span></span>
<span class="line"><span style="color:#24292F;">4026531837 user        7  1460 core /usr/lib/systemd/systemd --user</span></span>
<span class="line"><span style="color:#24292F;">4026531838 uts        12  1460 core /usr/lib/systemd/systemd --user</span></span>
<span class="line"><span style="color:#24292F;">4026531839 ipc        12  1460 core /usr/lib/systemd/systemd --user</span></span>
<span class="line"><span style="color:#24292F;">4026531840 net        12  1460 core /usr/lib/systemd/systemd --user</span></span>
<span class="line"><span style="color:#24292F;">4026531841 mnt         7  1460 core /usr/lib/systemd/systemd --user</span></span>
<span class="line"><span style="color:#24292F;">4026532285 user      123  1649 core catatonit -P</span></span>
<span class="line"><span style="color:#24292F;">4026532351 mnt         4  1649 core catatonit -P</span></span>
<span class="line"><span style="color:#24292F;">4026532422 net         1 25827 core bash</span></span>
<span class="line"><span style="color:#24292F;">4026532545 mnt         1 25827 core bash</span></span>
<span class="line"><span style="color:#24292F;">4026532546 mnt         1 25791 core /usr/bin/slirp4netns --disable-host-loopback --mtu=65520 --enable-sandbox --enable-seccomp --enable-ipv6 -c -r 3 --netns-t</span></span>
<span class="line"><span style="color:#24292F;">4026532550 uts         1 25827 core bash</span></span>
<span class="line"><span style="color:#24292F;">4026532551 ipc         1 25827 core bash</span></span>
<span class="line"><span style="color:#24292F;">4026532552 pid         1 25827 core bash</span></span>
<span class="line"><span style="color:#24292F;">4026532553 cgroup      1 25827 core bash</span></span>
<span class="line"></span></code></pre></div><div class="language-bash ext-sh"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">[core@localhost </span><span style="color:#CF222E;">~</span><span style="color:#24292F;">]$ lsof -p 25827</span></span>
<span class="line"><span style="color:#24292F;">COMMAND   PID USER   FD   TYPE DEVICE SIZE/OFF      NODE NAME</span></span>
<span class="line"><span style="color:#24292F;">bash    25827 core  cwd    DIR   0,49       28  57671966 /</span></span>
<span class="line"><span style="color:#24292F;">bash    25827 core  rtd    DIR   0,49       28  57671966 /</span></span>
<span class="line"><span style="color:#24292F;">bash    25827 core  txt    REG   0,49  1113504 134217858 /bin/bash</span></span>
<span class="line"><span style="color:#24292F;">bash    25827 core  mem    REG  252,4          134217858 /bin/bash (path dev=0,46, inode=2117823)</span></span>
<span class="line"><span style="color:#24292F;">bash    25827 core  mem    REG  252,4          202375451 /lib/x86_64-linux-gnu/libnss_files-2.27.so (stat: No such file or directory)</span></span>
<span class="line"><span style="color:#24292F;">bash    25827 core  mem    REG  252,4          202375445 /lib/x86_64-linux-gnu/libnsl-2.27.so (stat: No such file or directory)</span></span>
<span class="line"><span style="color:#24292F;">bash    25827 core  mem    REG  252,4          202375455 /lib/x86_64-linux-gnu/libnss_nis-2.27.so (stat: No such file or directory)</span></span>
<span class="line"><span style="color:#24292F;">bash    25827 core  mem    REG  252,4          202375447 /lib/x86_64-linux-gnu/libnss_compat-2.27.so (stat: No such file or directory)</span></span>
<span class="line"><span style="color:#24292F;">bash    25827 core  mem    REG  252,4          202375315 /lib/x86_64-linux-gnu/libc-2.27.so (stat: No such file or directory)</span></span>
<span class="line"><span style="color:#24292F;">bash    25827 core  mem    REG  252,4          202375355 /lib/x86_64-linux-gnu/libdl-2.27.so (stat: No such file or directory)</span></span>
<span class="line"><span style="color:#24292F;">bash    25827 core  mem    REG  252,4          202375489 /lib/x86_64-linux-gnu/libtinfo.so.5.9 (stat: No such file or directory)</span></span>
<span class="line"><span style="color:#24292F;">bash    25827 core  mem    REG  252,4          202375297 /lib/x86_64-linux-gnu/ld-2.27.so (stat: No such file or directory)</span></span>
<span class="line"><span style="color:#24292F;">bash    25827 core    0r  FIFO   0,13      0t0   2329821 pipe</span></span>
<span class="line"><span style="color:#24292F;">bash    25827 core    1w  FIFO   0,13      0t0   2329822 pipe</span></span>
<span class="line"><span style="color:#24292F;">bash    25827 core    2w  FIFO   0,13      0t0   2329823 pipe</span></span>
<span class="line"></span></code></pre></div><p>è¿™æ¬¡å‘ç°è¾“å…¥æµæ˜¯ä¸€ä¸ªå‘½åç®¡é“ï¼Œç»ˆç«¯ä¸å®¹å™¨ä¹‹é—´çš„äº¤äº’æ˜¯é€šè¿‡ç®¡é“æ–‡ä»¶ï¼å®é™…ä¸Šé™¤äº†é€šè¿‡ç®¡é“æ–‡ä»¶è¿›è¡Œäº¤äº’ï¼Œè¿˜èƒ½é€šè¿‡ TTY è®¾å¤‡æ–‡ä»¶ã€‚</p><h3 id="tty-é€‰é¡¹" tabindex="-1"><a class="header-anchor" href="#tty-é€‰é¡¹" aria-hidden="true">#</a> tty é€‰é¡¹</h3><blockquote><p>äº†è§£æ›´å¤š <a href="/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/TTY.html" class="">TTY</a></p></blockquote><p>TTY (ç”µä¼ æ‰“å­—æœº teletype çš„ç¼©å†™) è¿‡å»æ˜¯è®¡ç®—æœºé™„åŠ çš„ç»ˆç«¯è®¾å¤‡ï¼Œç°åœ¨ Linux çš„ä¸­ TTY æ˜¯ä¸€ä¸ªè½¯ä»¶ä»¿çœŸç»ˆç«¯çš„æ¦‚å¿µï¼Œå½“æˆ‘ä»¬æ‰“å¼€ä¸€ä¸ªç»ˆç«¯è½¯ä»¶å¦‚ zshï¼Œåœ¨â€œä¸€åˆ‡çš†æ–‡ä»¶â€çš„ Linux ä¸­æœ‰ç€å¯¹åº”çš„è®¾å¤‡æ–‡ä»¶ï¼Œè¾“å…¥ <code>tty</code> å¯æŸ¥åˆ°å¯¹åº”çš„è®¾å¤‡æ–‡ä»¶ï¼š</p><div class="language-bash ext-sh"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">$ tty</span></span>
<span class="line"><span style="color:#24292F;">/dev/ttys003</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p>ä¸ºæ­¤ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠå®¹å™¨çš„æ ‡å‡†æµç»‘å®šåˆ° TTY ä¸Šï¼Œå¯¹ç€ TTY è®¾å¤‡æ–‡ä»¶è¯»å†™å³å¯ä¸ç”¨æˆ·ç»ˆç«¯è¿›è¡Œäº¤äº’ã€‚å½“ç”¨æˆ·åœ¨æ§åˆ¶å°ä¸­å¯åŠ¨æ™®é€šç¨‹åºæ—¶ï¼Œé€šå¸¸å…¶ stdinã€stdout å’Œ stderr æµå°†è¿æ¥åˆ°ä¼šè¯çš„æ§åˆ¶ç»ˆç«¯ï¼š</p><div class="language-bash ext-sh"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">$ tty</span></span>
<span class="line"><span style="color:#24292F;">/dev/ttys003</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">$ cat            </span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p>ç„¶ååœ¨æ‰“å¼€å¦ä¸€ä¸ªç»ˆç«¯ï¼ŒæŸ¥æ‰¾ cat è¿›ç¨‹ç›¸å…³ä¿¡æ¯</p><div class="language-bash ext-sh"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">$ tty</span></span>
<span class="line"><span style="color:#24292F;">/dev/ttys004</span></span>
<span class="line"><span style="color:#24292F;">$ lsof -p 18825     </span></span>
<span class="line"><span style="color:#24292F;">...</span></span>
<span class="line"><span style="color:#24292F;">cat     18825 lianyuansheng    0u   CHR   16,3    0t373                1525 /dev/ttys003</span></span>
<span class="line"><span style="color:#24292F;">cat     18825 lianyuansheng    1u   CHR   16,3    0t373                1525 /dev/ttys003</span></span>
<span class="line"><span style="color:#24292F;">cat     18825 lianyuansheng    2u   CHR   16,3    0t373                1525 /dev/ttys003</span></span>
<span class="line"><span style="color:#24292F;">...</span></span>
<span class="line"></span></code></pre></div><p>å¯ä»¥çœ‹å‡º cat å­è¿›ç¨‹çš„æ ‡å‡†æµè‡ªåŠ¨ç»‘å®šåˆ° ttys003 ä¸Šã€‚ä½†è¿›ç¨‹çš„æ§åˆ¶ç»ˆç«¯ä¸ä¸€å®šæ€»æ˜¯ä¸å®ƒçš„æµæ‰€è¿æ¥çš„ç»ˆç«¯ç›¸åŒã€‚æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹pså‘½ä»¤æŸ¥çœ‹è¿™äº›å†…å®¹ï¼š</p><div class="language-bash ext-sh"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">$ sudo ps -ax -o pid,tty</span></span>
<span class="line"><span style="color:#24292F;">  PID TTY</span></span>
<span class="line"><span style="color:#24292F;">    1 </span><span style="color:#CF222E;">??</span></span>
<span class="line"><span style="color:#24292F;">   50 ttys003</span></span>
<span class="line"><span style="color:#24292F;">   51 </span><span style="color:#CF222E;">??</span></span>
<span class="line"></span></code></pre></div><ul><li>TTY åˆ—è¡¨ç¤ºè¿›ç¨‹çš„æ§åˆ¶ç»ˆç«¯</li><li>?? æ„å‘³ç€å®ˆæŠ¤è¿›ç¨‹</li></ul><p>å›åˆ°å®¹å™¨çš„å¯åŠ¨é€‰é¡¹ï¼š</p><p><code>-tï½œ--tty</code>ï¼šä¸ºå®¹å™¨åˆ†é…ä¸€ä¸ªä¼ª TTY ç»ˆç«¯å¹¶ç»‘å®šåˆ°å®¹å™¨çš„æ ‡å‡†è¾“ä¸Šã€‚</p><p>ä¸Šé¢æ‰€è¯´çš„ TTY æ˜¯å†…æ ¸æä¾›çš„ä½œä¸ºç³»ç»Ÿæ“ä½œäº¤äº’çš„ä¸€éƒ¨åˆ†ï¼Œè€Œä¼ªç»ˆç«¯ PTYï¼ˆpseudo TTYï¼‰åˆ™æ˜¯è¿è¡Œåœ¨ç”¨æˆ·æ€ï¼Œå¯è‡ªå®šä¹‰äºè¿›ç¨‹é—´çš„äº¤äº’ã€‚é€šè¿‡æ‰“å¼€ç‰¹æ®Šçš„è®¾å¤‡æ–‡ä»¶ /dev/ptmx åˆ›å»ºï¼Œç”±ä¸€å¯¹åŒå‘çš„å­—ç¬¦è®¾å¤‡æ„æˆï¼Œç§°ä¸º PTY master å’Œ PTY slaveï¼Œ PTY master å’Œ PTY slave ä¹‹é—´è¿›è¡ŒåŒå‘è¯»å†™ã€‚</p><div class="language-bash ext-sh"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">[core@localhost </span><span style="color:#CF222E;">~</span><span style="color:#24292F;">]$ podman run --rm -t -a stdout -a stdin ubuntu</span></span>
<span class="line"><span style="color:#24292F;">root@f1dc70c90896:/</span><span style="color:#6E7781;"># pwd</span></span>
<span class="line"><span style="color:#24292F;">/</span></span>
<span class="line"><span style="color:#24292F;">root@f1dc70c90896:/</span><span style="color:#6E7781;"># </span></span>
<span class="line"></span></code></pre></div><p>å¯åŠ¨å¦ä¸€ä¸ªç»ˆç«¯æŸ¥çœ‹åˆ°è¿›ç¨‹ç»‘å®šäº† PTY slaveï¼š</p><div class="language-bash ext-sh"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">[core@localhost </span><span style="color:#CF222E;">~</span><span style="color:#24292F;">]$ lsof -p 29269</span></span>
<span class="line"><span style="color:#24292F;">...</span></span>
<span class="line"><span style="color:#24292F;">bash    29269 core    0u   CHR  136,0      0t0         3 /dev/pts/0</span></span>
<span class="line"><span style="color:#24292F;">bash    29269 core    1u   CHR  136,0      0t0         3 /dev/pts/0</span></span>
<span class="line"><span style="color:#24292F;">bash    29269 core    2u   CHR  136,0      0t0         3 /dev/pts/0</span></span>
<span class="line"><span style="color:#24292F;">...</span></span>
<span class="line"></span></code></pre></div><p>é‚£ä¹ˆ PTY master å‘¢ï¼ŸPTY master æ˜¯ç»‘å®šåœ¨å“ªé‡Œï¼Ÿç”±è°æ“ä½œï¼ŸæŸ¥çœ‹ç»ˆç«¯ä¸ Podman è¿›ç¨‹å…³è”åˆ°åŒä¸€ PTY è®¾å¤‡æ–‡ä»¶ï¼š</p><div class="language-bash ext-sh"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">[core@localhost </span><span style="color:#CF222E;">~</span><span style="color:#24292F;">]$ ps a</span></span>
<span class="line"><span style="color:#24292F;">...</span></span>
<span class="line"><span style="color:#24292F;">29188 pts/0    Ss     0:00 -bash</span></span>
<span class="line"><span style="color:#24292F;">29223 pts/0    Sl+    0:09 podman run --rm -t -a stdin -a stdout ubuntu</span></span>
<span class="line"><span style="color:#24292F;">...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">[core@localhost </span><span style="color:#CF222E;">~</span><span style="color:#24292F;">]$ lsof /dev/pts/0</span></span>
<span class="line"><span style="color:#24292F;">COMMAND   PID USER   FD   TYPE DEVICE SIZE/OFF NODE NAME</span></span>
<span class="line"><span style="color:#24292F;">bash    29188 core    0u   CHR  136,0      0t0    3 /dev/pts/0</span></span>
<span class="line"><span style="color:#24292F;">bash    29188 core    1u   CHR  136,0      0t0    3 /dev/pts/0</span></span>
<span class="line"><span style="color:#24292F;">bash    29188 core    2u   CHR  136,0      0t0    3 /dev/pts/0</span></span>
<span class="line"><span style="color:#24292F;">bash    29188 core  255u   CHR  136,0      0t0    3 /dev/pts/0</span></span>
<span class="line"><span style="color:#24292F;">podman  29223 core    0u   CHR  136,0      0t0    3 /dev/pts/0</span></span>
<span class="line"><span style="color:#24292F;">podman  29223 core    1u   CHR  136,0      0t0    3 /dev/pts/0</span></span>
<span class="line"><span style="color:#24292F;">podman  29223 core    2u   CHR  136,0      0t0    3 /dev/pts/0</span></span>
<span class="line"></span></code></pre></div><p>æ•´ä½“æ¶æ„å¦‚ä¸‹ï¼š</p><div class="language-bash ext-sh"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">+----------+                +----------+                                      +---------------+</span></span>
<span class="line"><span style="color:#CF222E;">|</span><span style="color:#24292F;"> Terminal </span><span style="color:#CF222E;">|</span><span style="color:#24292F;"> ---[attach]--- </span><span style="color:#CF222E;">|</span><span style="color:#24292F;">  Podman  </span><span style="color:#CF222E;">|</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">&lt;</span><span style="color:#24292F;">-- [pty] -- read/write -- [pts] --</span><span style="color:#CF222E;">&gt;</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">|</span><span style="color:#24292F;">   Container   </span><span style="color:#CF222E;">|</span></span>
<span class="line"><span style="color:#24292F;">+----------+                +----------+                                      +---------------+</span></span>
<span class="line"></span></code></pre></div><p><strong>Terminal Fork å‡ºçš„ Podman è¿›ç¨‹å¹¶ä¸”å…¶æŒæœ‰ PTY master è®¾å¤‡ã€‚è¿™æ ·é€šè¿‡ä¸­é—´çš„ Podman è¿›ç¨‹ï¼Œç»ˆç«¯å³å¯é—´æ¥ä¸å®¹å™¨äº¤äº’</strong>ã€‚</p><p>ååŠéƒ¨åˆ†å¯ä»¥æ¢åšç®¡é“ FIFOï¼Œå³ <code>-i</code> å‚æ•°ä¸‹çš„æ¨¡å¼ï¼š</p><div class="language-bash ext-sh"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">+----------+                +----------+              +---------------+</span></span>
<span class="line"><span style="color:#CF222E;">|</span><span style="color:#24292F;"> Terminal </span><span style="color:#CF222E;">|</span><span style="color:#24292F;"> ---[attach]--- </span><span style="color:#CF222E;">|</span><span style="color:#24292F;">  Podman  </span><span style="color:#CF222E;">|</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">&lt;</span><span style="color:#24292F;">-- FIFO --</span><span style="color:#CF222E;">&gt;</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">|</span><span style="color:#24292F;">   Container   </span><span style="color:#CF222E;">|</span></span>
<span class="line"><span style="color:#24292F;">+----------+                +----------+              +---------------+</span></span>
<span class="line"></span></code></pre></div><h3 id="it" tabindex="-1"><a class="header-anchor" href="#it" aria-hidden="true">#</a> -it</h3><p>ä»å‰é¢æˆ‘ä»¬çŸ¥é“å®¹å™¨äº¤äº’çš„åŸç†ï¼Œå¹¶ä¸”æœ‰ä¸¤ä¸ªäº¤äº’å¯åŠ¨å‚æ•°ï¼š</p><ul><li><code>-i</code>ï¼šæ‰“å¼€å®¹å™¨è¾“å…¥æµï¼Œé€šè¿‡ç®¡é“æ–‡ä»¶äº¤äº’</li><li><code>-t</code>ï¼šä¸ºå®¹å™¨åˆ†é…ä¼ªç»ˆç«¯ï¼Œé€šè¿‡ä¼ªç»ˆç«¯è®¾å¤‡æ–‡ä»¶äº¤äº’</li></ul><p>ä½†é€šå¸¸æˆ‘ä»¬ä¼šæ›´æ¨èä½¿ç”¨ <code>-it</code> ç»„åˆå‚æ•°ï¼š</p><ul><li><code>-i</code>ï¼šå°†ç»ˆç«¯é™„åŠ åˆ°å®¹å™¨</li><li>é€šè¿‡ä¼ªç»ˆç«¯ä¸è¿›ç¨‹äº¤äº’ï¼Œå› ä¸ºç»ˆç«¯ï¼ˆåŒ…æ‹¬ä¼ªç»ˆç«¯ï¼‰å…·æœ‰æŸäº›å±æ€§å¯ä»¥æ§åˆ¶æ˜¾ç¤ºæ ¼å¼</li><li>å¹¶ä¸”è¿˜ä¼šæ‹¦æˆªå¤„ç†ç‰¹æ®Šé”®åºï¼Œå‘é€è¿›ç¨‹ä¿¡å·ï¼Œæ¯”å¦‚ <ul><li>å½“ç”¨æˆ·æŒ‰ CTRL+c æ—¶ï¼Œå®ƒå‘è¿æ¥åˆ° PTY slave çš„è¿›ç¨‹å‘é€ kill -2ï¼ˆSIGINTï¼‰ ä¿¡å·</li><li>å½“ç”¨æˆ·æŒ‰ CTRL+z æ—¶ï¼Œå®ƒå‘è¿æ¥åˆ° PTY slave çš„è¿›ç¨‹å‘é€ kill -STOP ä¿¡å·</li></ul></li></ul><h2 id="ä»é™„åŠ æ¨¡å¼ä¸­åˆ†ç¦»" tabindex="-1"><a class="header-anchor" href="#ä»é™„åŠ æ¨¡å¼ä¸­åˆ†ç¦»" aria-hidden="true">#</a> ä»é™„åŠ æ¨¡å¼ä¸­åˆ†ç¦»</h2><p><code>CTRL-c</code> é€šå¸¸æ˜¯ç»ˆç«¯ç»“æŸä¼šè¯å›åˆ°åŸ shell æç¤ºç¬¦çš„å¸¸ç”¨æ–¹æ³•ã€‚è€Œåœ¨é™„åŠ æ¨¡å¼ï¼ˆé»˜è®¤æ¨¡å¼å’Œäº¤äº’æ¨¡å¼ï¼‰ä¸‹çš„å®¹å™¨ï¼Œè¾“å…¥ <code>CTRL-c</code> å¯èƒ½ä¼šå¯¼è‡´å®¹å™¨åœæ­¢ã€‚ä»¥é™„åŠ æ¨¡å¼å¯åŠ¨çš„ nginxï¼š</p><div class="language-bash ext-sh"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">[core@localhost </span><span style="color:#CF222E;">~</span><span style="color:#24292F;">]$ podman run --rm nginx</span></span>
<span class="line"></span></code></pre></div><p>åœ¨é”®ç›˜è¾“å…¥ <code>CTRL-c</code> åå®¹å™¨åœæ­¢ã€‚æœ‰æ—¶æˆ‘ä»¬ä¸å¸Œæœ› <code>CTRL+c</code> æ–­å¼€æ—¶æ€æ­»å®¹å™¨ï¼Œé‚£æ€ä¹ˆåŠï¼Ÿå®é™…åŸç†ä¸Š <code>CTRL-c</code> ä¼šè¢«ç»ˆç«¯æ‹¦æˆªå‘é€æˆ SIGINT ä¿¡å·ï¼Œç„¶åè¢« Podman ä»£ç†è½¬å‘åˆ°å®¹å™¨ï¼š</p><div class="language-bash ext-sh"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">+----------+                 +----------+               +---------------+</span></span>
<span class="line"><span style="color:#CF222E;">|</span><span style="color:#24292F;"> Terminal </span><span style="color:#CF222E;">|</span><span style="color:#24292F;"> ---[Signal]---</span><span style="color:#CF222E;">&gt;</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">|</span><span style="color:#24292F;">  Podman  </span><span style="color:#CF222E;">|</span><span style="color:#24292F;"> --[Signal]--</span><span style="color:#CF222E;">&gt;</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">|</span><span style="color:#24292F;">   Container   </span><span style="color:#CF222E;">|</span></span>
<span class="line"><span style="color:#24292F;">+----------+                 +----------+               +---------------+</span></span>
<span class="line"></span></code></pre></div><p>è®©æˆ‘ä»¬è¦†ç›–ä¼ é€’ <code>-â€“sig-proxy=false</code> çš„è¡Œä¸ºï¼š</p><div class="language-bash ext-sh"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">[core@localhost </span><span style="color:#CF222E;">~</span><span style="color:#24292F;">]$ podman run --rm --sig-proxy=false  nginx</span></span>
<span class="line"><span style="color:#24292F;">...è¾“å‡ºçœç•¥</span></span>
<span class="line"></span></code></pre></div><p>è¾“å…¥ <code>CTRL-c</code> åï¼Œå®¹å™¨è¿˜åœ¨åå°è¿è¡Œã€‚</p><div class="language-bash ext-sh"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">^C[core@localhost </span><span style="color:#CF222E;">~</span><span style="color:#24292F;">]$ podman ps</span></span>
<span class="line"><span style="color:#24292F;">CONTAINER ID  IMAGE                   COMMAND               CREATED        STATUS            PORTS       NAMES</span></span>
<span class="line"><span style="color:#24292F;">59841a040b52  localhost/nginx:latest  nginx -g daemon o...  5 seconds ago  Up 5 seconds ago              gallant_shirley</span></span>
<span class="line"><span style="color:#24292F;">[core@localhost </span><span style="color:#CF222E;">~</span><span style="color:#24292F;">]$  </span></span>
<span class="line"></span></code></pre></div><p>å…¶å®åœ¨è¿™è¿‡ç¨‹åˆ†äº†ç»ˆç«¯ä¸å®¹å™¨ï¼Œæœ€ç»ˆè¢«é”€æ¯çš„æ˜¯ä¸­é—´çš„ Podman è¿›ç¨‹ã€‚æˆ‘ä»¬åœ¨ç»ˆç«¯è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œä¸æ–­å¾ªç¯æ•è· SIGINT ä¿¡å·ï¼Œç„¶åæŒ‰ <code>CTRL-c</code> ï¼š</p><div class="language-bash ext-sh"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">[core@localhost </span><span style="color:#CF222E;">~</span><span style="color:#24292F;">]$ podman run --rm --sig-proxy=false ubuntu /bin/bash -c </span><span style="color:#0A3069;">&#39;trap &quot;echo got it&quot; 2;while :;do sleep 0.1;done&#39;</span></span>
<span class="line"><span style="color:#24292F;">^C[core@localhost </span><span style="color:#CF222E;">~</span><span style="color:#24292F;">]$ </span></span>
<span class="line"></span></code></pre></div><p>åœ¨å¦ä¸€ä¸ªç»ˆç«¯æŸ¥è¯¢è¿›ç¨‹ä¿¡æ¯ï¼š</p><div class="language-bash ext-sh"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">[core@localhost </span><span style="color:#CF222E;">~</span><span style="color:#24292F;">]$ ps a</span></span>
<span class="line"><span style="color:#24292F;">    PID TTY      STAT   TIME COMMAND</span></span>
<span class="line"><span style="color:#24292F;">   5452 pts/0    Ss     0:00 -bash</span></span>
<span class="line"><span style="color:#24292F;"> 100715 pts/0    Sl+    0:00 podman run --rm --sig-proxy=false ubuntu /bin/bash -c </span><span style="color:#0550AE;">trap</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;echo got it&quot;</span><span style="color:#24292F;"> 2</span><span style="color:#CF222E;">;while</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">:</span><span style="color:#CF222E;">;do</span><span style="color:#24292F;"> sleep 0.1</span><span style="color:#CF222E;">;done</span></span>
<span class="line"><span style="color:#24292F;"> 100933 pts/1    R+     0:00 ps a</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">// è¾“å…¥ </span><span style="color:#0A3069;">`CTRL-c`</span><span style="color:#24292F;"> å</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">[core@localhost </span><span style="color:#CF222E;">~</span><span style="color:#24292F;">]$ ps a</span></span>
<span class="line"><span style="color:#24292F;">    PID TTY      STAT   TIME COMMAND</span></span>
<span class="line"><span style="color:#24292F;">   5452 pts/0    Ss+    0:00 -bash</span></span>
<span class="line"><span style="color:#24292F;"> 101053 pts/1    R+     0:00 ps a</span></span>
<span class="line"><span style="color:#24292F;">[core@localhost </span><span style="color:#CF222E;">~</span><span style="color:#24292F;">]$ podman ps</span></span>
<span class="line"><span style="color:#24292F;">CONTAINER ID  IMAGE                    COMMAND               CREATED         STATUS             PORTS       NAMES</span></span>
<span class="line"><span style="color:#24292F;">cb060aeb4618  localhost/ubuntu:latest  /bin/bash -c trap...  43 seconds ago  Up 43 seconds ago              romantic_villani</span></span>
<span class="line"></span></code></pre></div><p>ä»å®éªŒä¸Šçœ‹ï¼Œè¾“å…¥ <code>CTRL-c</code> åï¼Œå¹¶æ²¡æœ‰æ•è·åˆ°ä¿¡å·è¾“å‡º <code>echo got it</code>ï¼›podman è¿›ç¨‹é”€æ¯äº†ï¼›è€Œå®¹å™¨ä¾æ—§è¿˜åœ¨è¿è¡Œã€‚</p><p>å†æ¥çœ‹ä¸ªäº¤äº’æ¨¡å¼ä¸‹çš„ä¾‹å­ï¼š</p><div class="language-bash ext-sh"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">[core@localhost </span><span style="color:#CF222E;">~</span><span style="color:#24292F;">]$ podman run --rm --sig-proxy=false -it nginx</span></span>
<span class="line"><span style="color:#24292F;">...è¾“å‡ºçœç•¥</span></span>
<span class="line"></span></code></pre></div><p>è¾“å…¥ <code>CTRL-c</code> åå‘ç°å®¹å™¨ç«Ÿç„¶ç»ˆæ­¢äº†ï¼Œ<code>-â€“sig-proxy=false</code> ä¸èµ·æ•ˆï¼ŒåŸå› æ˜¯ä½œä¸º TTY äº¤äº’æ¨¡å¼ä¸‹ï¼Œ<code>CTRL-c</code> æ®Šé”®åºä½œä¸ºä¼ªç»ˆç«¯è¾“å…¥ä¼šè¢«æ‹¦æˆªå¤„ç†ç‰¹ï¼Œå‘é€ä¿¡å·ç»™äº†å®¹å™¨é‡Œçš„ 1 å·è¿›ç¨‹ã€‚</p><p>æ‰€ä»¥<strong>åœ¨é™„åŠ æ¨¡å¼ä¸‹ä¸å®¹å™¨åˆ†ç¦»æ—¶è¦ç‰¹åˆ«æ³¨æ„å¯¹å®¹å™¨é€ æˆå½±å“</strong>ã€‚å¯é€šè¿‡ <code>--detach-keys</code> å¯ä»¥è‡ªå®šä¹‰åˆ†ç¦»é”®åºï¼š</p><div class="language-bash ext-sh"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">[core@localhost </span><span style="color:#CF222E;">~</span><span style="color:#24292F;">]$ podman run --rm --sig-proxy=false -it --detach-keys=</span><span style="color:#0A3069;">&quot;ctrl-x&quot;</span><span style="color:#24292F;">  nginx</span></span>
<span class="line"><span style="color:#24292F;">...è¾“å‡ºçœç•¥</span></span>
<span class="line"></span></code></pre></div><p>é”®å…¥ <code>CTRL-x</code> åï¼Œå®¹å™¨è¿˜åœ¨åå°è¿è¡Œã€‚</p><div class="language-bash ext-sh"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">[core@localhost </span><span style="color:#CF222E;">~</span><span style="color:#24292F;">]$ podman ps</span></span>
<span class="line"><span style="color:#24292F;">CONTAINER ID  IMAGE                   COMMAND               CREATED        STATUS            PORTS       NAMES</span></span>
<span class="line"><span style="color:#24292F;">fdaa412851a2  localhost/nginx:latest  nginx -g daemon o...  6 seconds ago  Up 6 seconds ago              sweet_hofstadter</span></span>
<span class="line"></span></code></pre></div><h2 id="kill-1-å·è¿›ç¨‹" tabindex="-1"><a class="header-anchor" href="#kill-1-å·è¿›ç¨‹" aria-hidden="true">#</a> kill 1 å·è¿›ç¨‹</h2><p>æœ‰äº†å‰é¢ç»éªŒåï¼Œæˆ‘ä»¬å°è¯•ä¸‹é¢ä¾‹å­ï¼Œå´å‘ç°å†æ€ä¹ˆè¾“å…¥ <code>CTRL-c</code> éƒ½æ²¡æ³•ç»ˆæ­¢å®¹å™¨å›åˆ°åŸç»ˆç«¯ã€‚éš¾é“å®¹å™¨æ²¡æœ‰æ”¶åˆ° SIGINT ä¿¡å·ï¼Ÿå…¶å®ä¸ç„¶ã€‚</p><div class="language-bash ext-sh"><pre class="shiki" style="background-color:#ffffff;"><code><span class="line"><span style="color:#24292F;">[core@localhost </span><span style="color:#CF222E;">~</span><span style="color:#24292F;">]$ podman run --rm -it ubuntu</span></span>
<span class="line"><span style="color:#24292F;">root@6df454625261:/</span><span style="color:#6E7781;"># ^C</span></span>
<span class="line"><span style="color:#24292F;">root@6df454625261:/</span><span style="color:#6E7781;"># ^C</span></span>
<span class="line"><span style="color:#24292F;">root@6df454625261:/</span><span style="color:#6E7781;"># </span></span>
<span class="line"></span></code></pre></div><blockquote><p>ç­”æ¡ˆå‚è€ƒã€Šå®¹å™¨å®æˆ˜é«˜æ‰‹è¯¾ã€‹- 02 | ç†è§£è¿›ç¨‹ï¼ˆ1ï¼‰ï¼šä¸ºä»€ä¹ˆæˆ‘åœ¨å®¹å™¨ä¸­ä¸èƒ½kill 1å·è¿›ç¨‹ï¼Ÿ</p></blockquote><p>TL;DRï¼š</p><ol><li>æ¯ä¸ªå®¹å™¨å†…éƒ¨éƒ½ä¼šå¯åŠ¨ä¸€ä¸ªç”¨æˆ·æ€çš„ init è¿›ç¨‹ï¼Œç§°ä¸º 1 å·è¿›ç¨‹ã€‚1 å·è¿›ç¨‹æœ€åŸºæœ¬çš„åŠŸèƒ½éƒ½æ˜¯åˆ›å»ºå‡º Linux ç³»ç»Ÿä¸­å…¶ä»–æ‰€æœ‰çš„è¿›ç¨‹ï¼Œå¹¶ä¸”ç®¡ç†è¿™äº›è¿›ç¨‹ã€‚è™½ç„¶æœ€ä½³æ–¹å¼æ˜¯ä¸€ä¸ªå®¹å™¨åªå¯åŠ¨ä¸€ä¸ªè¿›ç¨‹ï¼Œä½†æˆ‘ä»¬éš¾å…ä¼šå¯åŠ¨ä¸€äº›ç›‘æ§è¿›ç¨‹ç­‰ï¼Œè€Œä¸”å¾ˆå¤šæ—¶å€™è·‘åœ¨å®¹å™¨çš„åº”ç”¨æœåŠ¡æ˜¯å¤šè¿›ç¨‹æ¶æ„ã€‚</li><li>Linux å†…æ ¸é’ˆå¯¹æ¯ä¸ª Nnamespace é‡Œçš„ init è¿›ç¨‹ï¼ŒæŠŠåªæœ‰ default handler çš„ä¿¡å·éƒ½ç»™å¿½ç•¥äº†</li><li>ç”¨æˆ·å¯ä»¥è‡ªå·±æ³¨å†Œäº† handler ç¼–ç é€€å‡ºï¼Œè¿™æ ·åˆå§‹è¿›ç¨‹æ˜¯å¯ä»¥å“åº” SIGINT æˆ– SIGTERM ç­‰ä¿¡å·</li><li>ä½†è¯·æ³¨æ„åœ¨ Linux ä¸­ SIGKILL å’Œ SIGSTOP è¿™ä¸¤ä¸ªç‰¹æƒä¿¡å·ä¸å…è®¸è‡ªå®šä¹‰æ•è·</li></ol><h2 id="attach-vs-exec-æœ‰ä»€ä¹ˆåŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#attach-vs-exec-æœ‰ä»€ä¹ˆåŒºåˆ«" aria-hidden="true">#</a> attach vs exec - æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h2><p>ä¸æ­£åœ¨è¿è¡Œçš„å®¹å™¨è¿›è¡Œäº¤äº’æœ‰ä¸¤æ¡å‘½ä»¤ï¼š</p><ul><li><code>podman attach &lt;cid&gt;</code>ï¼šè·Ÿå®¹å™¨çš„ 1 å·è¿›ç¨‹äº¤äº’</li><li><code>podman exec &lt;cid&gt; [option] &lt;commond&gt;</code>ï¼šåœ¨å®¹å™¨ä¸­å¯åŠ¨æ–°çš„è¿›ç¨‹æ‰§è¡Œå‘½ä»¤</li></ul><p>ç†è§£äº†å‰é¢å†…å®¹ï¼Œè¿™ä¸¤æ¡å‘½ä»¤åŸç†ä¹Ÿå°±å·®ä¸å¤šäº†ã€‚<strong>åŒºåˆ†å®ƒä»¬å…³é”®åœ¨äºæ˜¯å¦ä¸å®¹å™¨ 1 å·è¿›ç¨‹äº¤äº’</strong>ï¼ŒåŒæ—¶è¦æ³¨æ„å¯¹ä¿¡å·å¯¹å®¹å™¨çš„å½±å“ã€‚</p><h2 id="æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“" aria-hidden="true">#</a> æ€»ç»“</h2><p>æœ€åæ€»ç»“ï¼Œä¸»è¦ç†è§£ï¼š</p><ul><li>å®¹å™¨çš„å¯åŠ¨è¿è¡Œæ¨¡å¼ï¼šé™„åŠ æ¨¡å¼ã€åˆ†ç¦»æ¨¡å¼ <ul><li>é™„åŠ æ¨¡å¼ <ul><li>é»˜è®¤æ¨¡å¼</li><li>äº¤äº’æ¨¡å¼</li></ul></li></ul></li></ul><p>è¿˜æœ‰äº¤äº’æ¨¡å¼ä¸‹ <code>-i</code>ï¼ˆä½¿ç”¨ç®¡é“ï¼‰ã€<code>-t</code>ï¼ˆä½¿ç”¨ TTYï¼‰ åŒºåˆ«ä»¥åŠå¤§è‡´æ¶æ„ <code>Terminal = Podman &lt;=&gt; Container</code>ã€‚æœ€åå®¹å™¨å¯¹ä¿¡å·é‡å¤„ç†é—®é¢˜ï¼ˆå¿½ç•¥æ‰€æœ‰ä¿¡å·ï¼Œé™¤éè‡ªå®šä¹‰æ•è·ï¼‰ï¼Œéœ€è¦ç‰¹åˆ«æ³¨æ„å¯¹å®¹å™¨å½±å“ã€‚</p></div><!----></article></div><footer class="footer footer-center p-4 bg-base-300 text-base-content opacity-60"><div><p>Â©2017-2021 laoergege.cn. All right reserved. </p><p><a href="https://beian.miit.gov.cn" target="_blank" class="link link-hover">ç²¤ICPå¤‡2022020679å·</a></p></div></footer><!--]--><!----><!--]--></div>
    <script src="/assets/js/runtime~app.7d4bd660.js" defer></script><script src="/assets/js/5838.13a569e5.js" defer></script><script src="/assets/js/app.7e792774.js" defer></script>
</body>

</html>